(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0f84":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("card",{staticStyle:{height:"230%"},attrs:{type:"chart"}},[e("template",{slot:"header"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-6",class:t.isRTL?"text-right":"text-left"},[e("h5",{staticClass:"card-category"},[t._v(t._s(t.$t("dashboard.data")))]),e("h2",{staticClass:"card-title"},[t._v(t._s(t.activeData))]),e("base-dropdown",{class:{"float-left":t.isRTL},attrs:{"menu-on-right":"",tag:"div","title-classes":"btn btn-link btn-icon","aria-label":"Settings menu"}},[e("i",{staticClass:"tim-icons icon-settings-gear-63",attrs:{slot:"title"},slot:"title"}),t._l(t.dataPossible,(function(a){return e("div",{key:a.text},[e("a",{staticClass:"dropdown-item",attrs:{href:"#dashboardSondes"},on:{click:t.changeData}},[t._v(t._s(a.text))])])}))],2)],1),e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"btn-group btn-group-toggle",class:t.isRTL?"float-left":"float-right",attrs:{"data-toggle":"buttons"}},t._l(t.bigLineChartCategories,(function(a,i){return e("label",{key:a,staticClass:"btn btn-sm btn-primary btn-simple",class:{active:t.bigLineChart.activeIndex===i},attrs:{id:i}},[e("input",{attrs:{type:"radio",name:"options",autocomplete:"off"},domProps:{checked:t.bigLineChart.activeIndex===i},on:{click:function(a){return t.initBigChart(i)}}}),t._v(" "+t._s(a)+" ")])})),0)])])]),e("div",{staticClass:"chart-area"},[e("line-chart",{ref:"bigChart",staticStyle:{height:"100%"},attrs:{"chart-id":"big-line-chart","chart-data":t.bigLineChart.chartData,"gradient-colors":t.bigLineChart.gradientColors,"gradient-stops":t.bigLineChart.gradientStops,"extra-options":t.bigLineChart.extraOptions}})],1)],2)],1)])},r=[],o=(e("ac1f"),e("1276"),e("99af"),e("e260"),e("d3b7"),e("3ca3"),e("ddb0"),e("d81d"),e("159b"),e("6636")),n=e("11d0"),s=e("93b4"),c=e("a96d"),l=e("a173"),d=e("db49"),h={components:{LineChart:o["a"],BarChart:n["a"],TaskList:c["a"],UserTable:l["a"]},data:function(){return{sonde:["028","027","030","031","032"],activeSonde:["028","031","032"],dataPossible:[{text:"Temperature"},{text:"Hygrometry"},{text:"Pressure"},{text:"Rainfall"},{text:"Brightness"},{text:"Windvelocity max"},{text:"Windvelocity min"},{text:"Windvelocity avg"}],activeData:"Temperature",windMode:"min",bigLineChart:{allData:[],activeIndex:0,chartData:{datasets:[{}],labels:[]},extraOptions:s["b"],gradientColors:d["a"].colors.primaryGradient,gradientStops:[1,.4,0],categories:[]},greenLineChart:{extraOptions:s["a"],chartData:{labels:[],datasets:[{label:"My First dataset",fill:!0,borderColor:d["a"].colors.danger,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:d["a"].colors.danger,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:d["a"].colors.danger,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:[]}]},gradientColors:["rgba(66,134,121,0.15)","rgba(66,134,121,0.0)","rgba(66,134,121,0)"],gradientStops:[1,.4,0]}}},computed:{enableRTL:function(){return this.$route.query.enableRTL},isRTL:function(){return this.$rtl.isRTL},bigLineChartCategories:function(){return this.$t("dashboard.chartCategories")}},methods:{changeData:function(t){var a=t.originalTarget.innerText.split(" ");this.activeData=a[0],2==a.length&&(this.windMode=a[1]),console.log(this.activeData),this.initBigChart(this.activeIndex)},initBigChart:function(t){var a=this;console.log(t);var e=new Date;0==t?(e.setDate(e.getDate()-1),e=e.toISOString()):1==t?(e.setDate(e.getDate()-7),e=e.toISOString()):(e.setMonth(e.getMonth()-1),e=e.toISOString());for(var i=[],r=0;r<this.activeSonde.length;r++)i.push("http://piensg".concat(this.activeSonde[r],":8080/data/").concat(this.activeData.toLowerCase(),"/").concat(e));console.log(i),Promise.all(i.map((function(t){return fetch(t)}))).then((function(t){return Promise.all(t.map((function(t){return t.json()})))})).then((function(t){var e={datasets:[],labels:[]},i=0;t.forEach((function(t){var r=[];"Windvelocity"==a.activeData?(t[a.activeData.toLowerCase()].value.forEach((function(t){r.push(t[a.windMode])})),console.log(r)):r=t[a.activeData.toLowerCase()].value;var o=255*Math.random(),n=255*Math.random(),s=255*Math.random();e.datasets.push({label:a.activeSonde[i],fill:!0,borderColor:"rgba(".concat(o,",").concat(n,",").concat(s,",1)"),borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:"rgba(".concat(o,",").concat(n,",").concat(s,",1)"),pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:d["a"].colors.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:r}),e.labels=t[a.activeData.toLowerCase()].date,console.log(e.datasets[0].data),a.$refs.bigChart.updateGradients(e),a.bigLineChart.chartData=e,i+=1}))})),this.bigLineChart.activeIndex=t}},mounted:function(){this.i18n=this.$i18n,this.enableRTL&&(this.i18n.locale="ar",this.$rtl.enableRTL()),this.initBigChart(0)},beforeDestroy:function(){this.$rtl.isRTL&&(this.i18n.locale="en",this.$rtl.disableRTL())}},g=h,b=e("2877"),u=Object(b["a"])(g,i,r,!1,null,null,null);a["default"]=u.exports}}]);
//# sourceMappingURL=dashboard.ae847e2c.js.map